

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>designer.preprocessing package &mdash; PyDesigner v0.2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="designer.system package" href="designer.system.html" />
    <link rel="prev" title="designer.postprocessing package" href="designer.postprocessing.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> PyDesigner
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/requirements.html">PyDesigner Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/fsl.html">FSL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/mrtrix3.html">MRtrix3 Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/python.html">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/pydesigner.html">PyDesigner</a></li>
</ul>
<p class="caption"><span class="caption-text">NeuroDock (Docker)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../docker/introduction.html">NeuroDock</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docker/docker_install.html">Docker Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docker/docker_configuration.html">Docker Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docker/docker_neurodock.html">Install NeuroDock</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docker/docker_neurodock_run.html">Run NeuroDock</a></li>
</ul>
<p class="caption"><span class="caption-text">List of Functions</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">designer</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="designer.html">designer package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="designer.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="designer.fitting.html">designer.fitting package</a></li>
<li class="toctree-l4"><a class="reference internal" href="designer.postprocessing.html">designer.postprocessing package</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">designer.preprocessing package</a></li>
<li class="toctree-l4"><a class="reference internal" href="designer.system.html">designer.system package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="designer.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="designer.html#module-designer">designer module</a></li>
<li class="toctree-l3"><a class="reference internal" href="designer.html#module-designer.info">designer.info module</a></li>
<li class="toctree-l3"><a class="reference internal" href="designer.html#module-designer.pydesigner">designer.pydesigner module</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PyDesigner</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="modules.html">designer</a> &raquo;</li>
        
          <li><a href="designer.html">designer package</a> &raquo;</li>
        
      <li>designer.preprocessing package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/modules/designer.preprocessing.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-designer.preprocessing">
<span id="designer-preprocessing-package"></span><h1>designer.preprocessing package<a class="headerlink" href="#module-designer.preprocessing" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-designer.preprocessing.mrinfoutil">
<span id="designer-preprocessing-mrinfoutil-module"></span><h2>designer.preprocessing.mrinfoutil module<a class="headerlink" href="#module-designer.preprocessing.mrinfoutil" title="Permalink to this headline">¶</a></h2>
<p>Utilities for extracting information on various input files using
MRtrix3’s mrinfo tool. All values are returned in basic Python data
types.</p>
<dl class="function">
<dt id="designer.preprocessing.mrinfoutil.commandhistory">
<code class="sig-prename descclassname">designer.preprocessing.mrinfoutil.</code><code class="sig-name descname">commandhistory</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.mrinfoutil.commandhistory" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of command history (manipulations or transformations)
performed on MRtrix file format .mif</p>
<dl class="simple">
<dt>path:   string</dt><dd><p>path to input image or directory</p>
</dd>
</dl>
<p>List</p>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.mrinfoutil.datatype">
<code class="sig-prename descclassname">designer.preprocessing.mrinfoutil.</code><code class="sig-name descname">datatype</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.mrinfoutil.datatype" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the data type used for image storage</p>
<dl class="simple">
<dt>path:   string</dt><dd><p>path to input image or directory</p>
</dd>
</dl>
<p>Str, mrtrix3 datatypes</p>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.mrinfoutil.dwscheme">
<code class="sig-prename descclassname">designer.preprocessing.mrinfoutil.</code><code class="sig-name descname">dwscheme</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.mrinfoutil.dwscheme" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of diffusion weighting scheme</p>
<dl class="simple">
<dt>path:   string</dt><dd><p>path to input image or directory</p>
</dd>
</dl>
<p>List</p>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.mrinfoutil.format">
<code class="sig-prename descclassname">designer.preprocessing.mrinfoutil.</code><code class="sig-name descname">format</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.mrinfoutil.format" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the file format of DWI at path</p>
<dl class="simple">
<dt>path:   string</dt><dd><p>path to input image or directory</p>
</dd>
</dl>
<p>String indicating format</p>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.mrinfoutil.getconsole">
<code class="sig-prename descclassname">designer.preprocessing.mrinfoutil.</code><code class="sig-name descname">getconsole</code><span class="sig-paren">(</span><em class="sig-param">path</em>, <em class="sig-param">flag</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.mrinfoutil.getconsole" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches the console output of mrinfo</p>
<dl class="simple">
<dt>path:   string</dt><dd><p>path to input image or directory</p>
</dd>
<dt>flag:   string</dt><dd><p>flag to pass onto mrinfo</p>
</dd>
</dl>
<p>String, information for flag</p>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.mrinfoutil.multiplier">
<code class="sig-prename descclassname">designer.preprocessing.mrinfoutil.</code><code class="sig-name descname">multiplier</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.mrinfoutil.multiplier" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the image intensity multiplier</p>
<dl class="simple">
<dt>path:   string</dt><dd><p>path to input image or directory</p>
</dd>
</dl>
<p>Float, image intensity multiplier</p>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.mrinfoutil.ndim">
<code class="sig-prename descclassname">designer.preprocessing.mrinfoutil.</code><code class="sig-name descname">ndim</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.mrinfoutil.ndim" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of image dimensions</p>
<dl class="simple">
<dt>path:   string</dt><dd><p>path to input image or directory</p>
</dd>
</dl>
<p>Int, number of dimensions in image</p>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.mrinfoutil.offset">
<code class="sig-prename descclassname">designer.preprocessing.mrinfoutil.</code><code class="sig-name descname">offset</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.mrinfoutil.offset" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the image intensity offset</p>
<dl class="simple">
<dt>path:   string</dt><dd><p>path to input image or directory</p>
</dd>
</dl>
<p>Flaot, image intensity offset</p>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.mrinfoutil.pescheme">
<code class="sig-prename descclassname">designer.preprocessing.mrinfoutil.</code><code class="sig-name descname">pescheme</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.mrinfoutil.pescheme" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of phase encoding scheme. If len(pescheme) &gt; 1,
the .mif DWI contains more than one directons</p>
<dl class="simple">
<dt>path:   string</dt><dd><p>path to input image or directory</p>
</dd>
</dl>
<dl class="simple">
<dt>nPE:    int</dt><dd><p>numer of PE directions</p>
</dd>
<dt>PE:     int or int list</dt><dd><p>Phase encoding direction(s)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.mrinfoutil.size">
<code class="sig-prename descclassname">designer.preprocessing.mrinfoutil.</code><code class="sig-name descname">size</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.mrinfoutil.size" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the size of image along each axis</p>
<dl class="simple">
<dt>path:  string</dt><dd><p>path to input image or directory</p>
</dd>
</dl>
<p>Int tuple, number of voxels in [X, Y, Z, B-value]</p>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.mrinfoutil.spacing">
<code class="sig-prename descclassname">designer.preprocessing.mrinfoutil.</code><code class="sig-name descname">spacing</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.mrinfoutil.spacing" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the voxel spacing along each image dimension</p>
<dl class="simple">
<dt>path:  string</dt><dd><p>path to input image or directory</p>
</dd>
</dl>
<p>Int tuple, number of spacing between voxels [X, Y, Z, B-value]</p>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.mrinfoutil.strides">
<code class="sig-prename descclassname">designer.preprocessing.mrinfoutil.</code><code class="sig-name descname">strides</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.mrinfoutil.strides" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns data strides</p>
<dl class="simple">
<dt>path:   string</dt><dd><p>path to input image or directory</p>
</dd>
</dl>
<p>Int tuple, mrtrix3 strides</p>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.mrinfoutil.transform">
<code class="sig-prename descclassname">designer.preprocessing.mrinfoutil.</code><code class="sig-name descname">transform</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.mrinfoutil.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the 4-by-4 voxel to image transformation matrix</p>
<dl class="simple">
<dt>path:   string</dt><dd><p>path to input image or directory</p>
</dd>
</dl>
<p>Tuple float list</p>
</dd></dl>

</div>
<div class="section" id="module-designer.preprocessing.mrpreproc">
<span id="designer-preprocessing-mrpreproc-module"></span><h2>designer.preprocessing.mrpreproc module<a class="headerlink" href="#module-designer.preprocessing.mrpreproc" title="Permalink to this headline">¶</a></h2>
<p>Utilities for running various MRtrix3’s DWI preprocessing tools</p>
<dl class="function">
<dt id="designer.preprocessing.mrpreproc.brainmask">
<code class="sig-prename descclassname">designer.preprocessing.mrpreproc.</code><code class="sig-name descname">brainmask</code><span class="sig-paren">(</span><em class="sig-param">input</em>, <em class="sig-param">output</em>, <em class="sig-param">thresh=0.25</em>, <em class="sig-param">nthreads=None</em>, <em class="sig-param">force=False</em>, <em class="sig-param">verbose=False</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.mrpreproc.brainmask" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a brainmask using FSL’s Brain Extraction Tool (BET) and
MRtrix3’s file manipulation tools.</p>
<p>input (str):      path to input .mif file
output (str):     path to output .nii brainmask file
thresh (flt):     BET threshold ranging from 0 to 1 (default: 0.25)
nthreads (int):   number of threads in multi-threaded applications
force (bool):     force overwrite of output files (default: False)
verbose (bool):   display information messages (default: False)</p>
<p>system call:    (none)</p>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.mrpreproc.degibbs">
<code class="sig-prename descclassname">designer.preprocessing.mrpreproc.</code><code class="sig-name descname">degibbs</code><span class="sig-paren">(</span><em class="sig-param">input</em>, <em class="sig-param">output</em>, <em class="sig-param">nthreads=None</em>, <em class="sig-param">force=False</em>, <em class="sig-param">verbose=False</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.mrpreproc.degibbs" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs MRtrix3’s <cite>mrdegibbs</cite> command with optimal parameters for
PyDesigner.</p>
<p>input (str):      path to input .mif file</p>
<p>output (str):     path to output .mif file
nthreads (int):   number of threads in multi-threaded applications
force (bool):     force overwrite of output files (default: False)
verbose (bool):   display information messages (default: False)</p>
<p>system call:    (none)</p>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.mrpreproc.denoise">
<code class="sig-prename descclassname">designer.preprocessing.mrpreproc.</code><code class="sig-name descname">denoise</code><span class="sig-paren">(</span><em class="sig-param">input</em>, <em class="sig-param">output</em>, <em class="sig-param">noisemap=True</em>, <em class="sig-param">extent='5</em>, <em class="sig-param">5</em>, <em class="sig-param">5'</em>, <em class="sig-param">nthreads=None</em>, <em class="sig-param">force=True</em>, <em class="sig-param">verbose=False</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.mrpreproc.denoise" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs MRtrix3’s <cite>dwidenoise</cite> command with optimal parameters for
PyDesigner.</p>
<p>input (str):      path to input .mif file</p>
<p>output (str):     path to output .mif file
noisemap (bool):  specify whether or not to save the noisemap as a</p>
<blockquote>
<div><p>nifti file (default: True)</p>
</div></blockquote>
<dl class="simple">
<dt>extent (str):     set the window size of the denoising filter.</dt><dd><p>(default: 5,5,5)</p>
</dd>
</dl>
<p>nthreads (int):   number of threads in multi-threaded applications
force (bool):     force overwrite of output files (default: False)
verbose (bool):   display information messages (default: False)</p>
<p>system call:    (none)</p>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.mrpreproc.extractbzero">
<code class="sig-prename descclassname">designer.preprocessing.mrpreproc.</code><code class="sig-name descname">extractbzero</code><span class="sig-paren">(</span><em class="sig-param">input</em>, <em class="sig-param">output</em>, <em class="sig-param">nthreads=None</em>, <em class="sig-param">force=False</em>, <em class="sig-param">verbose=False</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.mrpreproc.extractbzero" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts only bzero shells from an input mif file.</p>
<p>input (str):    path to input .mif file
output (str):   path to output .mif file
nthreads (int): number of workers to use
force (bool):   force overwrite of existing files
verbose (bool): determine whether to display console output</p>
<p>(none)          system call</p>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.mrpreproc.extractnonbzero">
<code class="sig-prename descclassname">designer.preprocessing.mrpreproc.</code><code class="sig-name descname">extractnonbzero</code><span class="sig-paren">(</span><em class="sig-param">input</em>, <em class="sig-param">output</em>, <em class="sig-param">nthreads=None</em>, <em class="sig-param">force=False</em>, <em class="sig-param">verbose=False</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.mrpreproc.extractnonbzero" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts only non-bzero shells from an input mif file.</p>
<p>input (str):    path to input .mif file
output (str):   path to output .mif file</p>
<p>(none)          system call</p>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.mrpreproc.miftonii">
<code class="sig-prename descclassname">designer.preprocessing.mrpreproc.</code><code class="sig-name descname">miftonii</code><span class="sig-paren">(</span><em class="sig-param">input</em>, <em class="sig-param">output</em>, <em class="sig-param">strides='1</em>, <em class="sig-param">2</em>, <em class="sig-param">3</em>, <em class="sig-param">4'</em>, <em class="sig-param">nthreads=None</em>, <em class="sig-param">force=True</em>, <em class="sig-param">verbose=False</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.mrpreproc.miftonii" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts input <cite>.mif</cite> images to output <cite>.nii</cite> images</p>
<p>input (str):    path to input .mif file
output (str):   path to output .nii file
strides (str):  specify the strides of the output data in memory</p>
<blockquote>
<div><p>(default: ‘1,2,3,4’)</p>
</div></blockquote>
<p>system call:    (none)</p>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.mrpreproc.niitomif">
<code class="sig-prename descclassname">designer.preprocessing.mrpreproc.</code><code class="sig-name descname">niitomif</code><span class="sig-paren">(</span><em class="sig-param">input</em>, <em class="sig-param">output</em>, <em class="sig-param">strides='1</em>, <em class="sig-param">2</em>, <em class="sig-param">3</em>, <em class="sig-param">4'</em>, <em class="sig-param">nthreads=None</em>, <em class="sig-param">force=True</em>, <em class="sig-param">verbose=False</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.mrpreproc.niitomif" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts input <cite>.nii</cite> images to output <cite>.nif</cite> images provided that
all BVEC, BVAL and JSON files are provided and named same as input .nii</p>
<p>input (str):    path to input .nii file
output (str):   path to output .mif file
strides (str):  specify the strides of the output data in memory</p>
<blockquote>
<div><p>(default: ‘1,2,3,4’)</p>
</div></blockquote>
<p>system call:    (none)</p>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.mrpreproc.riciancorrect">
<code class="sig-prename descclassname">designer.preprocessing.mrpreproc.</code><code class="sig-name descname">riciancorrect</code><span class="sig-paren">(</span><em class="sig-param">input</em>, <em class="sig-param">output</em>, <em class="sig-param">noise=None</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.mrpreproc.riciancorrect" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs Rician correction on input .mif</p>
<p>input (str):    path to input .mif file
output (str):   path to output .mif file
noise (float):  path to noise map from dwidenoise in .nii format</p>
<p>system call:    (none)</p>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.mrpreproc.smooth">
<code class="sig-prename descclassname">designer.preprocessing.mrpreproc.</code><code class="sig-name descname">smooth</code><span class="sig-paren">(</span><em class="sig-param">input</em>, <em class="sig-param">output</em>, <em class="sig-param">fwhm=1.25</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.mrpreproc.smooth" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs Gaussian smoothing on input .mif image</p>
<p>input (str):    path to input .mif file
output (str):   path to output .mif file
fwhm (float):   full-width half-maximum (FWHM) of smoothing to apply</p>
<p>system call:    (none)</p>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.mrpreproc.topupboost">
<code class="sig-prename descclassname">designer.preprocessing.mrpreproc.</code><code class="sig-name descname">topupboost</code><span class="sig-paren">(</span><em class="sig-param">input</em>, <em class="sig-param">output</em>, <em class="sig-param">idx=None</em>, <em class="sig-param">nthreads=None</em>, <em class="sig-param">force=False</em>, <em class="sig-param">verbose=False</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.mrpreproc.topupboost" title="Permalink to this definition">¶</a></dt>
<dd><p>Analyzes an input .mif’s PE direction to split into two different
phase encoding (PE) DWIs. B0s from opposing PE are then extracted
and concatenated with the DWI. This reduces the number of B0s used
in undistortion for a better and speedier estimation of the
distortion field.</p>
<p>input (str):    path to input .mif file
output (str):   path to output .mif file
idx (int):      list of B0 indexes to use in topup (default: 0)
nthreads (int): number of workers to use
force (bool):   force overwrite of existing files
verbose (bool): determine whether to display console output</p>
<p>(none)          system call</p>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.mrpreproc.undistort">
<code class="sig-prename descclassname">designer.preprocessing.mrpreproc.</code><code class="sig-name descname">undistort</code><span class="sig-paren">(</span><em class="sig-param">input</em>, <em class="sig-param">output</em>, <em class="sig-param">rpe='rpe_header'</em>, <em class="sig-param">qc=None</em>, <em class="sig-param">nthreads=None</em>, <em class="sig-param">force=False</em>, <em class="sig-param">verbose=False</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.mrpreproc.undistort" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs MRtrix3’s <cite>dwipreproc</cite> command with optimal parameters for
PyDesigner.</p>
<p>input (str):      path to input .mif file</p>
<p>output (str):     path to output .mif file
rpe (str):        reverse phase encoding of the dataset (default:</p>
<blockquote>
<div><p>rpe_header)</p>
</div></blockquote>
<dl class="simple">
<dt>qc (bool):        specify whether to generate eddy QC metric (</dt><dd><p>default: True)</p>
</dd>
</dl>
<p>nthreads (int):   number of threads in multi-threaded applications
force (bool):     force overwrite of output files (default: False)
verbose (bool):   display information messages (default: False)</p>
<p>system call:    (none)</p>
</dd></dl>

</div>
<div class="section" id="module-designer.preprocessing.preparation">
<span id="designer-preprocessing-preparation-module"></span><h2>designer.preprocessing.preparation module<a class="headerlink" href="#module-designer.preprocessing.preparation" title="Permalink to this headline">¶</a></h2>
<p>Adds utilities for preparing the data for eddy and analysis</p>
<dl class="function">
<dt id="designer.preprocessing.preparation.fix_bval">
<code class="sig-prename descclassname">designer.preprocessing.preparation.</code><code class="sig-name descname">fix_bval</code><span class="sig-paren">(</span><em class="sig-param">bvalfile</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.preparation.fix_bval" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts all whitespace into newlines in the file</p>
<dl class="simple">
<dt>bvalfile :obj: <cite>str</cite></dt><dd><p>The .bval to ensure is the correct format for mrtrix</p>
</dd>
</dl>
<p>None, overwrites bval</p>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.preparation.make_se_epi">
<code class="sig-prename descclassname">designer.preprocessing.preparation.</code><code class="sig-name descname">make_se_epi</code><span class="sig-paren">(</span><em class="sig-param">filetable</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.preparation.make_se_epi" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a single spin-echo epi from the topup and the dwi</p>
<dl class="simple">
<dt>filetable :dict:</dt><dd><p>The filetable that pydesigner.py uses to track files</p>
</dd>
</dl>
<p>None, writes file</p>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.preparation.make_simple_mif">
<code class="sig-prename descclassname">designer.preprocessing.preparation.</code><code class="sig-name descname">make_simple_mif</code><span class="sig-paren">(</span><em class="sig-param">filetable</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.preparation.make_simple_mif" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a single .mif from the HEAD dwi file</p>
<dl class="simple">
<dt>filetable :dict:</dt><dd><p>The filetable that pydesigner.py uses to track files</p>
</dd>
</dl>
<p>None, writes file</p>
</dd></dl>

</div>
<div class="section" id="module-designer.preprocessing.rician">
<span id="designer-preprocessing-rician-module"></span><h2>designer.preprocessing.rician module<a class="headerlink" href="#module-designer.preprocessing.rician" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="designer.preprocessing.rician.rician_correct">
<code class="sig-prename descclassname">designer.preprocessing.rician.</code><code class="sig-name descname">rician_correct</code><span class="sig-paren">(</span><em class="sig-param">dwi</em>, <em class="sig-param">noisemap</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.rician.rician_correct" title="Permalink to this definition">¶</a></dt>
<dd><p>Smooths a DWI dataset</p>
<dl>
<dt>dwi<span class="classifier">(X x Y x Z x N) img_like object</span></dt><dd><p>Image to be corrected, where N is the number of volumes in
the DWI acquisition.</p>
</dd>
<dt>csfmask<span class="classifier">(X x Y x Z x N) img_like object</span></dt><dd><p>The noise map from dwidenoise</p>
</dd>
<dt>width<span class="classifier">:obj: <cite>float</cite>, optional</span></dt><dd><p>The full width half max in voxels to be smoothed. Default: 1.25</p>
</dd>
</dl>
<dl class="simple">
<dt>corrected<span class="classifier">(X x Y x Z x N) array_like or img_like object</span></dt><dd><p>The rician-corrected version of dwi</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.rician.rician_img_correct">
<code class="sig-prename descclassname">designer.preprocessing.rician.</code><code class="sig-name descname">rician_img_correct</code><span class="sig-paren">(</span><em class="sig-param">dwiname</em>, <em class="sig-param">noisemapname</em>, <em class="sig-param">outpath=None</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.rician.rician_img_correct" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs Rician correction on a dataset with a noisemap</p>
<dl>
<dt>dwiname<span class="classifier">:obj: <cite>string</cite></span></dt><dd><p>Filename of image to be corrected</p>
</dd>
<dt>noisemapname :obj: <cite>string</cite></dt><dd><p>Filename of noisemap to use for correction</p>
</dd>
<dt>outpath :obj: <cite>string</cite></dt><dd><p>Path to put resulting file</p>
</dd>
</dl>
<p>None; writes out file</p>
<p>rician_correct(dwi, noise) is wrapped by this function</p>
</dd></dl>

</div>
<div class="section" id="module-designer.preprocessing.smoothing">
<span id="designer-preprocessing-smoothing-module"></span><h2>designer.preprocessing.smoothing module<a class="headerlink" href="#module-designer.preprocessing.smoothing" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="designer.preprocessing.smoothing.nansmooth">
<code class="sig-prename descclassname">designer.preprocessing.smoothing.</code><code class="sig-name descname">nansmooth</code><span class="sig-paren">(</span><em class="sig-param">imgslice</em>, <em class="sig-param">fwhm</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.smoothing.nansmooth" title="Permalink to this definition">¶</a></dt>
<dd><p>Smooths an image slice while ignoring NaNs</p>
<dl class="simple">
<dt>imgslice<span class="classifier">(X x Y) img_like or array_like object</span></dt><dd><p>2D image to be smoothed</p>
</dd>
<dt>fwhm<span class="classifier">:obj: float</span></dt><dd><p>The full width half max to be used for smoothing</p>
</dd>
</dl>
<dl class="simple">
<dt>smoothslice<span class="classifier">(X x Y) array_like object</span></dt><dd><p>2D smoothed image</p>
</dd>
</dl>
<p>This is done because a masked dataset will contain NaNs. In typical
operations and filtering, the NaNs will propagate instead of being
ignored (which is the desired behavior). During runtime, divide by 0
warnings are suppressed due to the high probability of its occuring.
The operation to avoid this is as follows:</p>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.smoothing.smooth">
<code class="sig-prename descclassname">designer.preprocessing.smoothing.</code><code class="sig-name descname">smooth</code><span class="sig-paren">(</span><em class="sig-param">dwi</em>, <em class="sig-param">csfmask=None</em>, <em class="sig-param">width=1.25</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.smoothing.smooth" title="Permalink to this definition">¶</a></dt>
<dd><p>Smooths a DWI dataset</p>
<dl>
<dt>dwi<span class="classifier">(X x Y x Z x N) img_like object</span></dt><dd><p>Image to be smoothed, where N is the number of volumes in
the DWI acquisition.</p>
</dd>
<dt>csfmask<span class="classifier">(S) img_like object</span></dt><dd><p>The mask of CSF that will be applied to each volume in DWI</p>
</dd>
<dt>width<span class="classifier">:obj: <cite>float</cite>, optional</span></dt><dd><p>The full width half max in voxels to be smoothed. Default: 1.25</p>
</dd>
</dl>
<dl class="simple">
<dt>smoothed<span class="classifier">(X x Y x Z x N) array_like or img_like object</span></dt><dd><p>The smoothed version of dwi</p>
</dd>
</dl>
<p>This is done mainly to reduce the Gibbs ringing. It might be
recommended to only smooth the high SNR (or b-valued) data in order
not to alter the Rice distribution of the low SNR data. This is
important to maintain the high accuracy of WLLS. If a CSF mask is 
given as an additional argument, CSF infiltration in microstructural
signal is avoided during smoothing.</p>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.smoothing.smooth_image">
<code class="sig-prename descclassname">designer.preprocessing.smoothing.</code><code class="sig-name descname">smooth_image</code><span class="sig-paren">(</span><em class="sig-param">dwiname</em>, <em class="sig-param">csfname=None</em>, <em class="sig-param">outname='dwism.nii'</em>, <em class="sig-param">width=1.2</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.smoothing.smooth_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Smooths a DWI dataset</p>
<dl>
<dt>dwiname<span class="classifier">:obj: <cite>string</cite></span></dt><dd><p>Filename of image to be smoothed</p>
</dd>
<dt>csfname<span class="classifier">:obj: <cite>string</cite></span></dt><dd><p>Filename of CSF mask</p>
</dd>
<dt>outname<span class="classifier">:obj: <cite>string</cite></span></dt><dd><p>Filename to be written out</p>
</dd>
<dt>width<span class="classifier">:obj: <cite>float</cite></span></dt><dd><p>The full width half max in voxels to be smoothed. Default: 1.25</p>
</dd>
</dl>
<p>None; writes out file</p>
<p>smooth(dwi, csfmask=None, width=1.25) is wrapped by this function</p>
</dd></dl>

</div>
<div class="section" id="module-designer.preprocessing.snrplot">
<span id="designer-preprocessing-snrplot-module"></span><h2>designer.preprocessing.snrplot module<a class="headerlink" href="#module-designer.preprocessing.snrplot" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="designer.preprocessing.snrplot.makesnr">
<em class="property">class </em><code class="sig-prename descclassname">designer.preprocessing.snrplot.</code><code class="sig-name descname">makesnr</code><span class="sig-paren">(</span><em class="sig-param">dwilist</em>, <em class="sig-param">noisepath=None</em>, <em class="sig-param">maskpath=None</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.snrplot.makesnr" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class object that computes and prints SNR plots for any number of
input DWIs</p>
<dl class="simple">
<dt>dwilist:    string list</dt><dd><p>list of 4D DWI (nifti-format) paths to evaluate and plot</p>
</dd>
<dt>noisepath:  string</dt><dd><p>path to noise map from “dwidenoise”</p>
</dd>
<dt>maskpath:   string (optional)</dt><dd><p>path to brain mask</p>
</dd>
</dl>
<p>__init__:       constructs makesnr class
getuniquebval:  creates a list of unique B-values for the purpose of</p>
<blockquote>
<div><p>SNR computation</p>
</div></blockquote>
<p>computesnr:     performs SNR computation
histcount:      bins SNR values
makeplot:       creates and saves SNR plot from bin counts</p>
<dl class="method">
<dt id="designer.preprocessing.snrplot.makesnr.computesnr">
<code class="sig-name descname">computesnr</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.snrplot.makesnr.computesnr" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes SNR of all DWIs in class object</p>
<p>(none)</p>
<p>snr_dwi:    Numpy array of SNR across all DWI.</p>
</dd></dl>

<dl class="method">
<dt id="designer.preprocessing.snrplot.makesnr.getuniquebval">
<code class="sig-name descname">getuniquebval</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.snrplot.makesnr.getuniquebval" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a list of unique B-values for the purpose of SNR
computation. In the calculation of SNR, B0 signal can be averaged
becase they are not associated to any direction. This is not true
for non-B0 values however, because every 3D volume represents a
different direction. To compute SNR appropriately, differences in
gradients have to be accounted. This function creates a list of
B-values in the order they need to appear for the calculation of
SNR.</p>
<p>(none)</p>
<dl class="simple">
<dt>b_list: Numpy vector containing list of B-vals to be used in</dt><dd><p>SNR calculation</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="designer.preprocessing.snrplot.makesnr.histcount">
<code class="sig-name descname">histcount</code><span class="sig-paren">(</span><em class="sig-param">nbins=100</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.snrplot.makesnr.histcount" title="Permalink to this definition">¶</a></dt>
<dd><p>Bins SNR into nbins and returns various counting properties</p>
<p>nbins:  int
:return:</p>
</dd></dl>

<dl class="method">
<dt id="designer.preprocessing.snrplot.makesnr.makeplot">
<code class="sig-name descname">makeplot</code><span class="sig-paren">(</span><em class="sig-param">path</em>, <em class="sig-param">smooth=True</em>, <em class="sig-param">smoothfactor=5</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.snrplot.makesnr.makeplot" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates and saves SNR plot to a path as SNR.png</p>
<dl class="simple">
<dt>path:           string</dt><dd><p>directory to save the plot in</p>
</dd>
<dt>smooth:         bool</dt><dd><p>Specify whether to interpolate and smooth</p>
</dd>
<dt>smoothfactor:   int</dt><dd><p>smoothing factor to apply</p>
</dd>
</dl>
<p>(none): saves plotted image into directory as SNR.png</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.snrplot.vectorize">
<code class="sig-prename descclassname">designer.preprocessing.snrplot.</code><code class="sig-name descname">vectorize</code><span class="sig-paren">(</span><em class="sig-param">img</em>, <em class="sig-param">mask</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.snrplot.vectorize" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns vectorized image based on brain mask, requires no input
parameters
If the input is 1D or 2D, unpatch it to 3D or 4D using a mask
If the input is 3D or 4D, vectorize it using a mask
Classification: Method</p>
<p>vec = dwi.vectorize(img) if there’s no mask
vec = dwi.vectorize(img, mask) if there’s a mask</p>
<p>vec: N X number_of_voxels vector or array, where N is the number of DWI
volumes</p>
</dd></dl>

</div>
<div class="section" id="module-designer.preprocessing.util">
<span id="designer-preprocessing-util-module"></span><h2>designer.preprocessing.util module<a class="headerlink" href="#module-designer.preprocessing.util" title="Permalink to this headline">¶</a></h2>
<p>Adds utilities for the command-line interface</p>
<dl class="class">
<dt id="designer.preprocessing.util.DWIFile">
<em class="property">class </em><code class="sig-prename descclassname">designer.preprocessing.util.</code><code class="sig-name descname">DWIFile</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.util.DWIFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Diffusion data file object, used for handling paths and extensions.</p>
<p>Helps interface different extensions, group .bval/.bvec seamlessly to
the programmer. Offers interactive tools to try and locate a file if
it can’t be found. Likely a bit overkill, but reduces uberscript
coding.</p>
<dl class="simple">
<dt>path<span class="classifier">string</span></dt><dd><p>The path to the file</p>
</dd>
<dt>name<span class="classifier">string</span></dt><dd><p>The base name of the file</p>
</dd>
<dt>ext<span class="classifier">array</span></dt><dd><p>The valid extensions for this grouping of dwi data</p>
</dd>
<dt>acquisition<span class="classifier">bool</span></dt><dd><p>Indicates if a DWI acquisition or not, relevant for .bval/.bvec</p>
</dd>
<dt>json<span class="classifier">struct</span></dt><dd><p>The contents of the .json metadata if available</p>
</dd>
</dl>
<dl class="method">
<dt id="designer.preprocessing.util.DWIFile.getBVAL">
<code class="sig-name descname">getBVAL</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.util.DWIFile.getBVAL" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the .bval filename for this DWIFile</p>
<dl class="simple">
<dt>string</dt><dd><p>The full path to the .bval</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="designer.preprocessing.util.DWIFile.getBVEC">
<code class="sig-name descname">getBVEC</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.util.DWIFile.getBVEC" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the .bvec filename for this DWIFile</p>
<dl class="simple">
<dt>string</dt><dd><p>The full path to the .bvec</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="designer.preprocessing.util.DWIFile.getFull">
<code class="sig-name descname">getFull</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.util.DWIFile.getFull" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the path and name combined for thsi dwifile</p>
<dl class="simple">
<dt>string</dt><dd><p>The full path and filename with extension</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="designer.preprocessing.util.DWIFile.getJSON">
<code class="sig-name descname">getJSON</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.util.DWIFile.getJSON" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the .json filename for this DWIFile</p>
<dl class="simple">
<dt>string</dt><dd><p>The full path to the .json file</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="designer.preprocessing.util.DWIFile.getName">
<code class="sig-name descname">getName</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.util.DWIFile.getName" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the name without the path for this dwifile</p>
<dl class="simple">
<dt>string</dt><dd><p>Name of the file without extensions</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="designer.preprocessing.util.DWIFile.getPath">
<code class="sig-name descname">getPath</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.util.DWIFile.getPath" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the path without the name for this dwifile</p>
<dl class="simple">
<dt>string</dt><dd><p>The path to this file</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="designer.preprocessing.util.DWIFile.hasJSON">
<code class="sig-name descname">hasJSON</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.util.DWIFile.hasJSON" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if this object has a .json file</p>
<blockquote>
<div><p>True if has .json, False if not</p>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="designer.preprocessing.util.DWIFile.isAcquisition">
<code class="sig-name descname">isAcquisition</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.util.DWIFile.isAcquisition" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if this object is an acquisition</p>
<dl class="simple">
<dt>bool</dt><dd><p>True if acquisition, False if not</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="designer.preprocessing.util.DWIFile.isPartialFourier">
<code class="sig-name descname">isPartialFourier</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.util.DWIFile.isPartialFourier" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns whether the volume is partial fourier encoded</p>
<dl class="simple">
<dt>boolean</dt><dd><p>Whether the encoding is partial fourier or not</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="designer.preprocessing.util.DWIFile.print">
<code class="sig-name descname">print</code><span class="sig-paren">(</span><em class="sig-param">json=False</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.util.DWIFile.print" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="designer.preprocessing.util.DWIParser">
<em class="property">class </em><code class="sig-prename descclassname">designer.preprocessing.util.</code><code class="sig-name descname">DWIParser</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.util.DWIParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Parses a list of DWIs and concatenates them into a single 4D NifTi
with appropriate BVEC, BVALS.</p>
<dl class="simple">
<dt>DWIlist<span class="classifier">list of strings</span></dt><dd><p>Contains paths to all input series</p>
</dd>
<dt>DWInlist:   list of strings</dt><dd><p>Contains path to file names without extension</p>
</dd>
<dt>DWIext:     list of strings</dt><dd><p>Contains extension of input files</p>
</dd>
<dt>BVALlist:   list of strings</dt><dd><p>Contains paths to all BVAL files</p>
</dd>
<dt>BVEClist:   list of strings</dt><dd><p>Contains paths to all BVEC files</p>
</dd>
<dt>JSONlist:   list of strings</dt><dd><p>Contains paths to all JSON files</p>
</dd>
<dt>nDWI:       int</dt><dd><p>Number of DWIs entered</p>
</dd>
</dl>
<dl class="method">
<dt id="designer.preprocessing.util.DWIParser.cat">
<code class="sig-name descname">cat</code><span class="sig-paren">(</span><em class="sig-param">path</em>, <em class="sig-param">ext='.nii'</em>, <em class="sig-param">verbose=False</em>, <em class="sig-param">force=False</em>, <em class="sig-param">resume=False</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.util.DWIParser.cat" title="Permalink to this definition">¶</a></dt>
<dd><p>Concatenates all input series when nDWI &gt; 1 into a 4D NifTi
along with a appropriate BVAL, BVEC and JSON files.
Concatenation of series via MRTRIX3 requires every NifTi file to
come with BVAL/BVEC to produce a .json with <cite>dw_scheme</cite>.</p>
<dl class="simple">
<dt>path:       string</dt><dd><p>Directory where to store concatenated series</p>
</dd>
<dt>ext:        string</dt><dd><p>Extenstion to save concatenated file in. Refer to MRTRIX3’s
<cite>mrconvert</cite> function for a list of possible extensions</p>
</dd>
<dt>verbose:    bool</dt><dd><p>Displays MRTRIX3’s console output</p>
</dd>
<dt>force:      bool</dt><dd><p>Forces file overwrite if they already exist</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="designer.preprocessing.util.DWIParser.getPath">
<code class="sig-name descname">getPath</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.util.DWIParser.getPath" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns directory where first file in DWI list is stored</p>
</dd></dl>

<dl class="method">
<dt id="designer.preprocessing.util.DWIParser.json2fslgrad">
<code class="sig-name descname">json2fslgrad</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.util.DWIParser.json2fslgrad" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates FSL .bvec and .bval for series missing that information.
Some datasets have their B0s separately that do not produce fsl
gradients upon conversion to NifTi. This function creates those
missing features for complete concatenation from .json file. Use
with caution if and only if you know your input series is a DWI.</p>
<dl class="simple">
<dt>path:   string</dt><dd><p>Path to NifTi file</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.util.bvec_is_fullsphere">
<code class="sig-prename descclassname">designer.preprocessing.util.</code><code class="sig-name descname">bvec_is_fullsphere</code><span class="sig-paren">(</span><em class="sig-param">bvec</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.util.bvec_is_fullsphere" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines if .bvec file is full or half-sphere</p>
<dl class="simple">
<dt>bvec<span class="classifier">string</span></dt><dd><p>The filename of the bvec</p>
</dd>
</dl>
<p>True if full-sphere, False if half</p>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.util.find_valid_ext">
<code class="sig-prename descclassname">designer.preprocessing.util.</code><code class="sig-name descname">find_valid_ext</code><span class="sig-paren">(</span><em class="sig-param">pathname</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.util.find_valid_ext" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds valid extensions for dwifile, helper function</p>
<dl class="simple">
<dt>pathname<span class="classifier">string</span></dt><dd><p>The name to try and find extensions for</p>
</dd>
</dl>
<dl class="simple">
<dt>array</dt><dd><p>Array of valid file extensions for the basename</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="designer.preprocessing.util.vecs_are_fullsphere">
<code class="sig-prename descclassname">designer.preprocessing.util.</code><code class="sig-name descname">vecs_are_fullsphere</code><span class="sig-paren">(</span><em class="sig-param">bvecs</em><span class="sig-paren">)</span><a class="headerlink" href="#designer.preprocessing.util.vecs_are_fullsphere" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines if input vectors are full or half-sphere</p>
<dl class="simple">
<dt>bvecs<span class="classifier">ndarray</span></dt><dd><p>Matrix of size [n_vectors x 3]</p>
</dd>
</dl>
<p>True if full-sphere, False if half</p>
<p>Adapted from Chris Rorden’s nii_preprocess as seen here:
<a class="reference external" href="https://github.com/neurolabusc/nii_preprocess/blob/dd1c84f23f8828923dd5fc493a22156b7006a3d4/nii_preprocess.m#L1786-L1824">https://github.com/neurolabusc/nii_preprocess/blob/dd1c84f23f8828923dd5fc493a22156b7006a3d4/nii_preprocess.m#L1786-L1824</a>
and reproduced from the original designer pipeline here:
<a class="reference external" href="https://github.com/m-ama/PyDesigner/blob/7a39ec4cb9679f1c3e9ead68baa8f8c111b0618a/designer/designer.py#L347-L368">https://github.com/m-ama/PyDesigner/blob/7a39ec4cb9679f1c3e9ead68baa8f8c111b0618a/designer/designer.py#L347-L368</a></p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="designer.system.html" class="btn btn-neutral float-right" title="designer.system package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="designer.postprocessing.html" class="btn btn-neutral float-left" title="designer.postprocessing package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Siddhartha Dhiman, Joshua Teves, Kayti Keith

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>